{% extends 'baseForMain.html' %}

{% block contents %}

<!-- user가 쓴 글일때 더보기 클릭하면 -->
<div class="icon"> 

   
</div>

<!-- user가 쓴 글이 아닐 때 더보기 클릭하면 -->
<div class="icon">
    <button>send a message</button>
</div>
<p id="flag" data-flag="{{my_post.author.country}}"></p>
<div>{{my_post.author.nickname}}</div>
<div>{{my_post.title}}</div>

<div>{{my_post.text}}</div>
 
{% if my_post.image %}
{% for i in my_post.image.all %}
<img src="{{i.image.url}}"/>



{% endfor %}

{% endif %}
<p>{{my_post.updated|date:"Y.m.d"}}</p>
{% if request.user == my_post.author %}
<a href="{%url 'update' my_post.id %}"><button>Edit</button></a>
<a href="{%url 'delete' my_post.id %}"><button id="deleteBtn" onclick="return confirm('Are you sure you want to delete this?');">Delete</button></a>

{% endif %}

<form class="comment" method="POST" action="{% url 'create_comment' my_post.id %}">
   {% csrf_token %}
   {{comment_form}}
  <button type="submit">comment</button>
  </form>
  
  {% for comment in my_post.comment.all %}
  <hr/>
  <div>comment user : {{comment.user.nickname}} </div>
  <div> comment : {{comment.content}}</div>
  <div> {{comment.created_at|date:"Y.m.d"}}
    {% if request.user == my_post.author %}
    <a href="{% url 'delete_comment' comment.id my_post.id %}"><button id="deleteBtn" onclick="return confirm('Are you sure you want to delete this comment?');">Delete</button></a>
    {% endif %}
  </div>
  <form method="POST" action="{% url 'create_recomment' comment.id my_post.id %}">
    {% csrf_token %}
    {{recomment_form}}
    <button type="submit">ReComment</button>
</form>
<hr />
{% for recom in comment.recomment.all %}

<div> ==>{{recom.user.nickname}}</div>
<div>{{recom.content}}</div>
{% if request.user == my_post.author %}
    <a href="{% url 'delete_recomment' recom.id my_post.id %}"><button id="deleteBtn" onclick="return confirm('Are you sure you want to delete this recomment?');">Delete</button></a>
{% endif %}
{% endfor %}

  {% endfor %}
  
  {% endblock %}
